# 项目规范

- 项目规范：项目中有一些开发规范和代码风格 
  1. 文件夹、文件名称统一小写、多个单词以连接符（-）连接； 
  2. JavaScript变量名称采用小驼峰标识，常量全部使用大写字母，组件采用大驼峰； 
  3. CSS采用普通CSS和styled-component结合来编写（全局采用普通CSS、局部采用styled-component）; 
     1. CSS样式重置
        - normalize.css
  4. 整个项目不再使用class组件，统一使用函数式组件，并且全面拥抱Hooks； 
  5. 所有的函数式组件，为了避免不必要的渲染，全部使用memo进行包裹； 
  6. 组件内部的状态，使用useState、useReducer；业务数据全部放在redux中管理；
  7. 函数组件内部基本按照如下顺序编写代码： 
     - 组件内部state管理； 
     - redux的hooks代码； 
     - 其他组件hooks代码； 
     - 其他逻辑代码； 
     - 返回JSX代码；
  8. redux代码规范如下： 
     - 每个模块有自己独立的reducer，通过combineReducer进行合并； 
     - 异步请求代码使用 redux-thunk，并且写在 actionCreators中； 
     - redux直接采用redux hooks方式编写，不再使用connect；
  9. 网络请求采用axios 
     - 对axios进行二次封装； 
     - 所有的模块请求会放到一个请求文件中单独管理；
  10. 项目使用AntDesign 
      - 项目中某些AntDesign中的组件会被拿过来使用； 
      - 但是多部分组件还是自己进行编写；



### react-router v6

- 路由配置，默认路由

  ```js
  const Routes = () => {
    const routes = useRoutes([
      {
        path: '/',
        element: <Navigate to="/discover"/>
      },
      {
        path: '/discover',
        element: <Discover/>,
        children: [
          {
            index: true,
            element: <Navigate to="/discover/recommend"/>
          },
          {
            path: 'recommend',
            element: <Recommend/>
          },
          {
            path: 'artist',
            element: <Artist/>
          },
          {
            path: 'album',
            element: <Album/>
          },
          {
            path: 'djradio',
            element: <Djradio/>
          },
          {
            path: 'playlist',
            element: <Playlist/>
          },
          {
            path: 'toplist',
            element: <Toplist/>
          }
        ]
      },
      {
        path: '/mine',
        element: <Mine/>
      },
      {
        path: '/friend',
        element: <Friend/>
      }
    ])
  
    return routes
  }
  ```

  

### redux-immutable

- redux-hooks
  - useSelector
  - useDispatch

- immutable - 不可变数据
  - 修改了对象，就会返回一个新的对象，返回 immutable对象，调用响应的 API进行操作
  - redux-immutable 调用 combineReducers 返回新的 immutable对象，结合redux使用，提升性能

### 音乐播放-顺序播放-随机播放

- 两种思路
  1. 维护两个播放列表
  2. 改变播放的index 
- 播放列表的边界值判断
- 歌词展示，解析 => {time: 毫秒, content: '内容'}